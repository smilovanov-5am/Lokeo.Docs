= Возвраты
:page-toclevels: 4

== Создать возврат
* POST web/refunds/v2

Если сумма возврата больше баланса субсчета нераспределенных средств, то вернет ошибку. Для получения субсчета нераспределенных средств используем существующий эндпойнт `contracts/{id}/subAccounts` с фильтром type=MoneyHold - вернет в коллекции один субсчет нераспределенных средств

Используемые события:
- RefundOnContractCreated из refillHub - признак создания возврата
- PersonAccountBalanceUpdated из personAccountHub - признак изменения баланса счета

=== Тело запроса
.JSON
[%collapsible]
====
[source,json]
----
{
    "contractId": 1,
    "amount": 1000.00
}
----
====

== Получение списка возвратов по лицевому счету
* GET web/contracts/{id}/refunds

=== Параметры запроса
* **id** - id лицевого счета

=== Ответ
.JSON
[%collapsible]
====
[source,json]
----
[
    {
        "id": 1,
        "creationDate": "2024-03-07T10:44:00.691",
        "number" : "03806675",
        "amount" : 1000.00,
    },
    {
        "id": 2,
        "creationDate": "2024-03-07T10:44:00.691",
        "number" : "66836042",
        "amount" : 2000.00,
    }
]
----
====